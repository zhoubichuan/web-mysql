<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>## 1. 什么是聚合函数</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="个人总结的vuepress学习技术文档-语法">
    <meta name="keywords" content="vuepress,最新技术文档,vuepress语法,markdown语法">
    
    <link rel="preload" href="/web-mysql/assets/css/0.styles.44048b8b.css" as="style"><link rel="preload" href="/web-mysql/assets/js/app.fa129f2d.js" as="script"><link rel="preload" href="/web-mysql/assets/js/2.ae449887.js" as="script"><link rel="preload" href="/web-mysql/assets/js/21.5148f8b8.js" as="script"><link rel="preload" href="/web-mysql/assets/js/3.e7c95100.js" as="script"><link rel="prefetch" href="/web-mysql/assets/js/10.3003765d.js"><link rel="prefetch" href="/web-mysql/assets/js/11.a7bf3d23.js"><link rel="prefetch" href="/web-mysql/assets/js/12.f0213c4a.js"><link rel="prefetch" href="/web-mysql/assets/js/13.1b0e531e.js"><link rel="prefetch" href="/web-mysql/assets/js/14.c07a7207.js"><link rel="prefetch" href="/web-mysql/assets/js/15.7f8fe091.js"><link rel="prefetch" href="/web-mysql/assets/js/16.50395bba.js"><link rel="prefetch" href="/web-mysql/assets/js/17.c8dd9efb.js"><link rel="prefetch" href="/web-mysql/assets/js/18.4a080fd7.js"><link rel="prefetch" href="/web-mysql/assets/js/19.2c836687.js"><link rel="prefetch" href="/web-mysql/assets/js/20.284f179b.js"><link rel="prefetch" href="/web-mysql/assets/js/22.8e2d3c9e.js"><link rel="prefetch" href="/web-mysql/assets/js/23.1e8b8e2f.js"><link rel="prefetch" href="/web-mysql/assets/js/24.0ad5724a.js"><link rel="prefetch" href="/web-mysql/assets/js/25.78fb0256.js"><link rel="prefetch" href="/web-mysql/assets/js/26.1a07348f.js"><link rel="prefetch" href="/web-mysql/assets/js/27.9cc055d8.js"><link rel="prefetch" href="/web-mysql/assets/js/28.d0977326.js"><link rel="prefetch" href="/web-mysql/assets/js/29.3228ec6d.js"><link rel="prefetch" href="/web-mysql/assets/js/30.e6bdf445.js"><link rel="prefetch" href="/web-mysql/assets/js/31.8cbad92b.js"><link rel="prefetch" href="/web-mysql/assets/js/32.b6732f8e.js"><link rel="prefetch" href="/web-mysql/assets/js/33.29ea3cb1.js"><link rel="prefetch" href="/web-mysql/assets/js/34.dc8345e8.js"><link rel="prefetch" href="/web-mysql/assets/js/35.c31478f6.js"><link rel="prefetch" href="/web-mysql/assets/js/36.93c23744.js"><link rel="prefetch" href="/web-mysql/assets/js/37.baf0ec55.js"><link rel="prefetch" href="/web-mysql/assets/js/38.a5ff189c.js"><link rel="prefetch" href="/web-mysql/assets/js/39.f377d353.js"><link rel="prefetch" href="/web-mysql/assets/js/4.72af2e51.js"><link rel="prefetch" href="/web-mysql/assets/js/40.78c1d7e3.js"><link rel="prefetch" href="/web-mysql/assets/js/41.f6a0673a.js"><link rel="prefetch" href="/web-mysql/assets/js/42.fc5eee98.js"><link rel="prefetch" href="/web-mysql/assets/js/43.d6a16d47.js"><link rel="prefetch" href="/web-mysql/assets/js/44.40ef48ac.js"><link rel="prefetch" href="/web-mysql/assets/js/45.7443c913.js"><link rel="prefetch" href="/web-mysql/assets/js/46.643dd9f0.js"><link rel="prefetch" href="/web-mysql/assets/js/47.39adc9dc.js"><link rel="prefetch" href="/web-mysql/assets/js/48.7cbd9f65.js"><link rel="prefetch" href="/web-mysql/assets/js/49.4458e02d.js"><link rel="prefetch" href="/web-mysql/assets/js/5.a079df31.js"><link rel="prefetch" href="/web-mysql/assets/js/50.923eaaa0.js"><link rel="prefetch" href="/web-mysql/assets/js/51.8ded52d9.js"><link rel="prefetch" href="/web-mysql/assets/js/52.39bfe045.js"><link rel="prefetch" href="/web-mysql/assets/js/53.e4d24f6e.js"><link rel="prefetch" href="/web-mysql/assets/js/6.d4a6253f.js"><link rel="prefetch" href="/web-mysql/assets/js/7.8021af02.js"><link rel="prefetch" href="/web-mysql/assets/js/8.864ed5c2.js"><link rel="prefetch" href="/web-mysql/assets/js/9.fc404ddf.js">
    <link rel="stylesheet" href="/web-mysql/assets/css/0.styles.44048b8b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-mysql/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-mysql/base/build/1.config.html" class="nav-link">
  1.mysql实践指南
</a></li><li class="dropdown-item"><!----> <a href="/web-mysql/base/practice/1.mysql.html" class="nav-link">
  2.mysql相关实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实战" class="dropdown-title"><span class="title">项目实战</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目实战" class="mobile-dropdown-title"><span class="title">项目实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-mysql/senior/use/1.recursionAndDynamics.html" class="nav-link">
  1.初级项目
</a></li><li class="dropdown-item"><!----> <a href="/web-mysql/senior/typeScript/1.index.html" class="nav-link">
  2.高级项目
</a></li></ul></div></div> <a href="https://github.com/zhoubichuan/web-mysql" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-mysql/base/build/1.config.html" class="nav-link">
  1.mysql实践指南
</a></li><li class="dropdown-item"><!----> <a href="/web-mysql/base/practice/1.mysql.html" class="nav-link">
  2.mysql相关实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实战" class="dropdown-title"><span class="title">项目实战</span> <span class="arrow down"></span></button> <button type="button" aria-label="项目实战" class="mobile-dropdown-title"><span class="title">项目实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-mysql/senior/use/1.recursionAndDynamics.html" class="nav-link">
  1.初级项目
</a></li><li class="dropdown-item"><!----> <a href="/web-mysql/senior/typeScript/1.index.html" class="nav-link">
  2.高级项目
</a></li></ul></div></div> <a href="https://github.com/zhoubichuan/web-mysql" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/web-mysql/base/build/1.config.html" class="sidebar-link">MySql 基础</a></li><li><a href="/web-mysql/base/build/2.webpack.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/3.file.html" class="sidebar-link">二.mysql 配置</a></li><li><a href="/web-mysql/base/build/4.single.html" class="sidebar-link">三.mysql 命令</a></li><li><a href="/web-mysql/base/build/5.page.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/7.module.html" class="sidebar-link">一.mysql基础知识</a></li><li><a href="/web-mysql/base/build/8.project.html" aria-current="page" class="active sidebar-link">## 1. 什么是聚合函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_1-什么是聚合函数" class="sidebar-link">1. 什么是聚合函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_1-1-sum" class="sidebar-link">1.1 SUM</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_1-2-avg" class="sidebar-link">1.2 AVG</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_1-3-max、min" class="sidebar-link">1.3 MAX、MIN</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_1-4-avg" class="sidebar-link">1.4 AVG</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_1-5-count" class="sidebar-link">1.5 COUNT</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_2-分组" class="sidebar-link">2. 分组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_2-1-语法" class="sidebar-link">2.1 语法</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_2-2-练习" class="sidebar-link">2.2 练习</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_2-3-分组筛选" class="sidebar-link">2.3 分组筛选</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_3-子查询" class="sidebar-link">3. 子查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_3-1-比较运算符的子查询" class="sidebar-link">3.1 比较运算符的子查询</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_3-2-查询年龄大于平均年龄的学生" class="sidebar-link">3.2 查询年龄大于平均年龄的学生</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_3-2-any-some-all" class="sidebar-link">3.2 ANY SOME ALL</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_3-3-查询一下有考试成绩的学生信息" class="sidebar-link">3.3 查询一下有考试成绩的学生信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-表连接" class="sidebar-link">4. 表连接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-1-连接类型" class="sidebar-link">4.1　连接类型</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-2-连接条件" class="sidebar-link">4.2　连接条件</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-3-内连接" class="sidebar-link">4.3　内连接</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-4-左外连接" class="sidebar-link">4.4　左外连接</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-5-右外连接" class="sidebar-link">4.5　右外连接</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-6-多表连接" class="sidebar-link">4.6　多表连接</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-7-无限分类-自身连接" class="sidebar-link">4.7　无限分类[自身连接]</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-8-删除重复记录-多表删除" class="sidebar-link">4.8 删除重复记录[多表删除]</a></li><li class="sidebar-sub-header"><a href="/web-mysql/base/build/8.project.html#_4-9-多表更新" class="sidebar-link">4.9 多表更新</a></li></ul></li></ul></li><li><a href="/web-mysql/base/build/9.utils.html" class="sidebar-link">## 1. 为什么需要设计数据库</a></li><li><a href="/web-mysql/base/build/10.ui.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/11.data.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/12.skill.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/13.com.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/14.data.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li><li><a href="/web-mysql/base/build/15.api.html" class="sidebar-link">一.搭建 mysql 运行环境</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id=""><a href="#" class="header-anchor">#</a></h1> <h2 id="_1-什么是聚合函数"><a href="#_1-什么是聚合函数" class="header-anchor">#</a> 1. 什么是聚合函数</h2> <p>对一组值进行计算，并返回计算后的值，一般用来统计数据</p> <h3 id="_1-1-sum"><a href="#_1-1-sum" class="header-anchor">#</a> 1.1 SUM</h3> <p>累加所有行的值</p> <p>计算ID=1的学生的的总分</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">SUM</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span>  <span class="token keyword">as</span> <span class="token string">'总分'</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-2-avg"><a href="#_1-2-avg" class="header-anchor">#</a> 1.2 AVG</h3> <p>计算所有行的平均值</p> <p>计算ID=1的学生的的平均分</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">AVG</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'平均分'</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-3-max、min"><a href="#_1-3-max、min" class="header-anchor">#</a> 1.3 MAX、MIN</h3> <p>计算所有行的最大值和最小值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">MAX</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> 最高分<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> 最低分 <span class="token keyword">from</span> score <span class="token keyword">where</span> student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-4-avg"><a href="#_1-4-avg" class="header-anchor">#</a> 1.4 AVG</h3> <p>计算所有行的平均值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">AVG</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'平均分'</span> 最低分 <span class="token keyword">from</span> score <span class="token keyword">where</span> student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-5-count"><a href="#_1-5-count" class="header-anchor">#</a> 1.5 COUNT</h3> <p>计算值不为NULL的行</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-分组"><a href="#_2-分组" class="header-anchor">#</a> 2. 分组</h2> <p>分组查询就是按某列的值进行分组，相同的值分成一组，然后可以对此组内进行求平均、求和等计算</p> <p>splitgroup</p> <h3 id="_2-1-语法"><a href="#_2-1-语法" class="header-anchor">#</a> 2.1 语法</h3> <p>SELECT 列名,查询表达式
FROM  &lt;表名&gt;<br>
WHERE  &lt;条件&gt;
GROUP BY &lt;分组字段&gt;
HAVING 分组后的过滤条件
ORDER BY 列名 [ASC,DESC]
LIMIT 偏移量,条数
SELECT列表中只能包含：</p> <p>被分组的列
为每个分组返回一个值的表达式，如聚合函数</p> <h3 id="_2-2-练习"><a href="#_2-2-练习" class="header-anchor">#</a> 2.2 练习</h3> <p>统计每位同学的平均成绩-单列分组</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> student_id<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> score <span class="token keyword">group</span> <span class="token keyword">by</span> student_id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>统计每门课程的最高分，并按分数从高到低排列</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> course_id<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> 平均分 <span class="token keyword">from</span> score <span class="token keyword">group</span> <span class="token keyword">by</span> course_id <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">max</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">desc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>统计各省的男女同学人数-多列分组</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> province<span class="token punctuation">,</span>gender<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> province<span class="token punctuation">,</span>gender
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-分组筛选"><a href="#_2-3-分组筛选" class="header-anchor">#</a> 2.3 分组筛选</h3> <p>2.3.1 语法</p> <p>SELECT  FROM  &lt;表名&gt;
WHERE
GROUP BY {col_name|expr|position}
HAVING  {col_name|expr|position}
ORDER BY {col_name|expr|position} [ASC|DESC]
LIMIT offset,row_count
WHERE用于过滤掉不符合条件的记录
HAVING 用于过滤分组后的记录
GROUP BY用于对筛选后的结果进行分组
2.3.2 练习</p> <p>统计学生人数超过1人的省份</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> province<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> province <span class="token keyword">having</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>不及格次数大于1次的学生</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> student_id<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 不及格次数 <span class="token keyword">from</span> score <span class="token keyword">where</span> grade <span class="token operator">&lt;</span><span class="token number">60</span> <span class="token keyword">group</span> <span class="token keyword">by</span> student_id <span class="token keyword">having</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-子查询"><a href="#_3-子查询" class="header-anchor">#</a> 3. 子查询</h2> <ul><li>子查询就是指出现在其它SQL语句中的SELECT语句,必须始终出现在圆括号中</li> <li>子查询可以包含多个关键字或条件</li> <li>子查询的外层查询可以是: SELECT、INSERT、UPDATE、SET等</li> <li>子查询可以返回常量、一行数据、一列数据或其它子查询</li></ul> <h3 id="_3-1-比较运算符的子查询"><a href="#_3-1-比较运算符的子查询" class="header-anchor">#</a> 3.1 比较运算符的子查询</h3> <p>= 等于</p> <blockquote><p>大于
&lt; 小于
= 大于等于
&lt;= 小于等于
&lt;&gt; 不等于
!= 不等于
&lt;=&gt; 安全不等于</p></blockquote> <h3 id="_3-2-查询年龄大于平均年龄的学生"><a href="#_3-2-查询年龄大于平均年龄的学生" class="header-anchor">#</a> 3.2 查询年龄大于平均年龄的学生</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token function">AVG</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span> 

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token function">AVG</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-2-any-some-all"><a href="#_3-2-any-some-all" class="header-anchor">#</a> 3.2 ANY SOME ALL</h3> <p>= &lt; &lt;= = &lt;&gt; !=
ANY 任何一个
SOME 某些
ALL 全部</p> <p>年龄大于陕西省任何一位同学</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> age  <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> province <span class="token operator">=</span> <span class="token string">'陕西省'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>年龄大于陕西省某些同学</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token keyword">SOME</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> age  <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> province <span class="token operator">=</span> <span class="token string">'陕西省'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>年龄大于陕西省所有同学</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> age  <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> province <span class="token operator">=</span> <span class="token string">'陕西省'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-3-查询一下有考试成绩的学生信息"><a href="#_3-3-查询一下有考试成绩的学生信息" class="header-anchor">#</a> 3.3 查询一下有考试成绩的学生信息</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span><span class="token operator">IN</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token operator">NOT</span> <span class="token operator">IN</span><span class="token punctuation">]</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">distinct</span> student_id <span class="token keyword">from</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token keyword">EXISTS</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>NOTEXISTS<span class="token punctuation">]</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">where</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">distinct</span> student_id <span class="token keyword">from</span> score <span class="token keyword">where</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id  <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_4-表连接"><a href="#_4-表连接" class="header-anchor">#</a> 4. 表连接</h2> <h3 id="_4-1-连接类型"><a href="#_4-1-连接类型" class="header-anchor">#</a> 4.1　连接类型</h3> <p>INNER JOIN 内连接
LEFT JOIN 左外连接
RIGHT JOIN 右外连接
ON 连接条件
tablejoin</p> <h3 id="_4-2-连接条件"><a href="#_4-2-连接条件" class="header-anchor">#</a> 4.2　连接条件</h3> <p>使用ON关键字来设定连接条件，也可以使用WHERE来代替</p> <p>ON来设定连接条件
也可以使用WHERE来对结果进行过滤</p> <h3 id="_4-3-内连接"><a href="#_4-3-内连接" class="header-anchor">#</a> 4.3　内连接</h3> <p>显示左表和右表中符合条件的</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> score <span class="token keyword">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-4-左外连接"><a href="#_4-4-左外连接" class="header-anchor">#</a> 4.4　左外连接</h3> <p>显示左表的全部和右表符合条件的</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> score <span class="token keyword">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-5-右外连接"><a href="#_4-5-右外连接" class="header-anchor">#</a> 4.5　右外连接</h3> <p>显示右表的全部和左表符合条件的</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> score <span class="token keyword">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-6-多表连接"><a href="#_4-6-多表连接" class="header-anchor">#</a> 4.6　多表连接</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> student<span class="token punctuation">.</span>name<span class="token punctuation">,</span>course<span class="token punctuation">.</span>name<span class="token punctuation">,</span>score<span class="token punctuation">.</span>grade <span class="token keyword">FROM</span> score 
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> student <span class="token keyword">ON</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>student_id
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> course <span class="token keyword">ON</span> course<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>course_id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-7-无限分类-自身连接"><a href="#_4-7-无限分类-自身连接" class="header-anchor">#</a> 4.7　无限分类[自身连接]</h3> <h4 id="_4-7-1-建表"><a href="#_4-7-1-建表" class="header-anchor">#</a> 4.7.1 建表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">table</span> category<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 parent_id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-7-2-插入语句"><a href="#_4-7-2-插入语句" class="header-anchor">#</a> 4.7.2 插入语句</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> category<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>parent_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'数码产品'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'服装'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'食品'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'iPad'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'李宁'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'康师傅'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4-7-3-查询所有的顶级分类下面分类的数量"><a href="#_4-7-3-查询所有的顶级分类下面分类的数量" class="header-anchor">#</a> 4.7.3 查询所有的顶级分类下面分类的数量</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> c1<span class="token punctuation">.</span>id<span class="token punctuation">,</span>c1<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span> category c1 <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> category c2 <span class="token keyword">ON</span> c1<span class="token punctuation">.</span>id <span class="token operator">=</span> c2<span class="token punctuation">.</span>parent_id
<span class="token keyword">WHERE</span> c1<span class="token punctuation">.</span>parent_id <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> c1<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4-7-4-父类变成名称"><a href="#_4-7-4-父类变成名称" class="header-anchor">#</a> 4.7.4 父类变成名称</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> c1<span class="token punctuation">.</span>id<span class="token punctuation">,</span>c1<span class="token punctuation">.</span>name<span class="token punctuation">,</span>p<span class="token punctuation">.</span>name
<span class="token keyword">FROM</span> category c1 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> category p <span class="token keyword">ON</span> c1<span class="token punctuation">.</span>parent_id <span class="token operator">=</span> p<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-8-删除重复记录-多表删除"><a href="#_4-8-删除重复记录-多表删除" class="header-anchor">#</a> 4.8 删除重复记录[多表删除]</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> category<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>parent_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'iPad'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'李宁'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">'康师傅'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-8-1-子查询找要删除的id"><a href="#_4-8-1-子查询找要删除的id" class="header-anchor">#</a> 4.8.1 子查询找要删除的ID</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> category c1 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>name <span class="token keyword">from</span> category <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> c2
<span class="token keyword">ON</span> c1<span class="token punctuation">.</span>name <span class="token operator">=</span> c2<span class="token punctuation">.</span>name <span class="token keyword">WHERE</span> c1<span class="token punctuation">.</span>id <span class="token operator">!=</span> c2<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4-8-2-通过in找要删除的id"><a href="#_4-8-2-通过in找要删除的id" class="header-anchor">#</a> 4.8.2 通过IN找要删除的ID</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> category c1 
<span class="token keyword">WHERE</span> c1<span class="token punctuation">.</span>name <span class="token operator">IN</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> name <span class="token keyword">from</span> category <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">AND</span> c1<span class="token punctuation">.</span>id <span class="token operator">NOT</span> <span class="token operator">IN</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> category <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-8-3-删除重复记录"><a href="#_4-8-3-删除重复记录" class="header-anchor">#</a> 4.8.3 删除重复记录</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> category
<span class="token keyword">WHERE</span> name <span class="token operator">IN</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> NAME <span class="token keyword">FROM</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> name <span class="token keyword">from</span> category <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> T1 <span class="token punctuation">)</span>
<span class="token operator">AND</span> id <span class="token operator">NOT</span> <span class="token operator">IN</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> id <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> id <span class="token keyword">from</span> category <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> T2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-9-多表更新"><a href="#_4-9-多表更新" class="header-anchor">#</a> 4.9 多表更新</h3> <h4 id="_4-9-1-插入省份-insert-select"><a href="#_4-9-1-插入省份-insert-select" class="header-anchor">#</a> 4.9.1 (插入省份)INSERT SELECT</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> province<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> province<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> province <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-9-2-更新省份"><a href="#_4-9-2-更新省份" class="header-anchor">#</a> 4.9.2　更新省份</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> student <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> province <span class="token keyword">ON</span> student<span class="token punctuation">.</span>province<span class="token operator">=</span>province<span class="token punctuation">.</span>name
 <span class="token keyword">SET</span> student<span class="token punctuation">.</span>province<span class="token operator">=</span>province<span class="token punctuation">.</span>id 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-9-3-修改字段"><a href="#_4-9-3-修改字段" class="header-anchor">#</a> 4.9.3 修改字段</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student 
CHANGE <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>province<span class="token punctuation">`</span></span> <span class="token identifier"><span class="token punctuation">`</span>province_id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhoubichuan/web-mysql/edit/master/src/base/build/8.project.md" target="_blank" rel="noopener noreferrer">在github上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/6/23 17:09:36</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-mysql/base/build/7.module.html" class="prev">
        一.mysql基础知识
      </a></span> <span class="next"><a href="/web-mysql/base/build/9.utils.html">
        ## 1. 为什么需要设计数据库
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/web-mysql/assets/js/app.fa129f2d.js" defer></script><script src="/web-mysql/assets/js/2.ae449887.js" defer></script><script src="/web-mysql/assets/js/21.5148f8b8.js" defer></script><script src="/web-mysql/assets/js/3.e7c95100.js" defer></script>
  </body>
</html>
